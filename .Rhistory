rm(list = ls())
graphics.off()
pc <- "C:/Users/wrz741/Dropbox/C5 Field Operations data/Folder Amal"
setwd(pc)
rm(pc)
library(plyr)
library(xlsx)
x1 <- read.csv("X-2 monthly visits 31Jul15.csv", sep=",")
# remove rows without a HHID
x1 <- x1[complete.cases(x1$HHID),]
# Format HHID and Listing number to have standard length. Then create unique ID
x1$HHID <-formatC(x1$HHID, width = 3, format = 'd', flag = 0)
x1$Listing.number <- formatC(x1$Listing.number, width = 4, format = 'd', flag = 0)
# create unique ID called "unique_HHID_list_no"
x1$unique_ID <- paste(x1$HHID, x1$Listing.number, sep="-")
# turn date characters into date format
x1$Date.of.monthly.visit <- as.Date(x1$Date.of.monthly.visit, format = "%d.%m.%y")
View(x1)
# Author: Matthew Phelps
#Desc: Calculate number of people living in each household at baseline
# Intro -------------------------------------------------------------------
rm(list = ls())
graphics.off()
pc <- "C:/Users/wrz741/Dropbox/C5 Field Operations data/Folder Amal"
setwd(pc)
rm(pc)
library(plyr)
library(xlsx)
x1 <- read.csv("X-2 monthly visits 31Jul15.csv", sep=",")
# remove rows without a HHID
x1 <- x1[complete.cases(x1$HHID),]
# Format HHID and Listing number to have standard length. Then create unique ID
x1$HHID <-formatC(x1$HHID, width = 3, format = 'd', flag = 0)
x1$Listing.number <- formatC(x1$Listing.number, width = 4, format = 'd', flag = 0)
# create unique ID called "unique_HHID_list_no"
x1$unique_ID <- paste(x1$HHID, x1$Listing.number, sep="-")
# turn date characters into date format
x1$Date.of.monthly.visit <- as.Date(x1$Date.of.monthly.visit, format = "%d.%m.%y")
save(x1, file = "C:/Users/wrz741/Dropbox/C5_R_Codes/Rdata/X-2 monthly visits 31Jul15.Rdata")
save(x2, file = "C:/Users/wrz741/Dropbox/C5_R_Codes/Rdata/X-1 Choleraphone distribution 31Jul15.Rdata")
# Author: Matthew Phelps
#Desc: Calculate number of people living in each household at baseline
# Intro -------------------------------------------------------------------
rm(list = ls())
graphics.off()
pc <- "C:/Users/wrz741/Dropbox/C5 Field Operations data/Folder Amal"
setwd(pc)
rm(pc)
library(plyr)
library(xlsx)
x1 <- read.csv("X-1 Choleraphone distribution 31Jul15.csv", sep=";")
# remove rows without a HHID
x1 <- x1[complete.cases(x1$HHID),]
# Format HHID and Listing number to have standard length. Then create unique ID
x1$HHID <-formatC(x1$HHID, width = 3, format = 'd', flag = 0)
x1$Listing.number <- formatC(x1$Listing.number, width = 4, format = 'd', flag = 0)
# create unique ID called "unique_HHID_list_no"
x1$unique_ID <- paste(x1$HHID, x1$Listing.number, sep="-")
# turn date characters into date format
x1_2 <- lapply(x1[,3:5], as.Date, format = "%d.%m.%y")
# Populate the withdrawl/move date as the current date for calculation purposes.
# Use a custom function
CurrentDate <- function(x) {
if (!is.na(x)) {
return(x)
} else {
x <- Sys.Date()
return(x)
}
}
for (i in 1:nrow(x1)) {
x1_2$Date.of.withdrawl.or.move[i] <- CurrentDate(x1_2$Date.of.withdrawl.or.move[i])
}
# Merge to create finished dataset
x2 <- cbind(x1[c(1:2, 6)], x1_2[1], x1_2[2], x1_2[3])
rm(x1, x1_2)
# Calculate number of days each unique household is active
x2$daysActive <- as.numeric(x2$Date.of.withdrawl.or.move - x2$Date.of.phone.distribution)
mean(x2$daysActive)
hist(x2$daysActive, breaks = 15)
# Save Data ---------------------------------------------------------------
save(x2, file = "C:/Users/wrz741/Dropbox/C5_R_Codes/Rdata/X-1 Choleraphone distribution 31Jul15.Rdata")
# Author: Matthew Phelps
#Desc: Calculate number of people living in each household at baseline
# Intro -------------------------------------------------------------------
rm(list = ls())
graphics.off()
pc <- "C:/Users/wrz741/Dropbox/C5 Field Operations data/Folder Amal"
setwd(pc)
rm(pc)
library(plyr)
library(xlsx)
# Author: Matthew Phelps
#Desc: Calculate number of people living in each household at baseline
# Intro -------------------------------------------------------------------
rm(list = ls())
graphics.off()
pc <- "C:/Users/wrz741/Dropbox/C5_R_Codes/Rdata"
setwd(pc)
rm(pc)
library(plyr)
library(xlsx)
load("X-1 Choleraphone distribution 31Jul15.Rdata")
x1 <- load("X-1 Choleraphone distribution 31Jul15.Rdata")
load("X-1 Choleraphone distribution 31Jul15.Rdata")
# Author: Matthew Phelps
#Desc: Calculate number of people living in each household at baseline
# Intro -------------------------------------------------------------------
rm(list = ls())
graphics.off()
pc <- "C:/Users/wrz741/Dropbox/C5 Field Operations data/Folder Amal"
setwd(pc)
rm(pc)
library(plyr)
library(xlsx)
x1 <- read.csv("X-1 Choleraphone distribution 31Jul15.csv", sep=";")
# remove rows without a HHID
x1 <- x1[complete.cases(x1$HHID),]
# Format HHID and Listing number to have standard length. Then create unique ID
x1$HHID <-formatC(x1$HHID, width = 3, format = 'd', flag = 0)
x1$Listing.number <- formatC(x1$Listing.number, width = 4, format = 'd', flag = 0)
# create unique ID called "unique_HHID_list_no"
x1$unique_ID <- paste(x1$HHID, x1$Listing.number, sep="-")
# turn date characters into date format
x1_2 <- lapply(x1[,3:5], as.Date, format = "%d.%m.%y")
# Populate the withdrawl/move date as the current date for calculation purposes.
# Use a custom function
CurrentDate <- function(x) {
if (!is.na(x)) {
return(x)
} else {
x <- Sys.Date()
return(x)
}
}
for (i in 1:nrow(x1)) {
x1_2$Date.of.withdrawl.or.move[i] <- CurrentDate(x1_2$Date.of.withdrawl.or.move[i])
}
# Merge to create finished dataset
x1 <- cbind(x1[c(1:2, 6)], x1_2[1], x1_2[2], x1_2[3])
rm(x1_2)
# Calculate number of days each unique household is active
x1$daysActive <- as.numeric(x1$Date.of.withdrawl.or.move - x1$Date.of.phone.distribution)
mean(x1$daysActive)
hist(x1$daysActive, breaks = 15)
save(x1, file = "C:/Users/wrz741/Dropbox/C5_R_Codes/Rdata/X-1 Choleraphone distribution 31Jul15.Rdata")
# Author: Matthew Phelps
#Desc: Calculate number of people living in each household at baseline
# Intro -------------------------------------------------------------------
rm(list = ls())
graphics.off()
pc <- "C:/Users/wrz741/Dropbox/C5 Field Operations data/Folder Amal"
setwd(pc)
rm(pc)
library(plyr)
library(xlsx)
x2 <- read.csv("X-2 monthly visits 31Jul15.csv", sep=",")
# remove rows without a HHID
x2 <- x2[complete.cases(x2$HHID),]
# Format HHID and Listing number to have standard length. Then create unique ID
x2$HHID <-formatC(x2$HHID, width = 3, format = 'd', flag = 0)
x2$Listing.number <- formatC(x2$Listing.number, width = 4, format = 'd', flag = 0)
# create unique ID called "unique_HHID_list_no"
x2$unique_ID <- paste(x2$HHID, x2$Listing.number, sep="-")
# turn date characters into date format
x2$Date.of.monthly.visit <- as.Date(x2$Date.of.monthly.visit, format = "%d.%m.%y")
save(x2, file = "C:/Users/wrz741/Dropbox/C5_R_Codes/Rdata/X-2 monthly visits 31Jul15.Rdata")
# Author: Matthew Phelps
#Desc: Calculate number of people living in each household at baseline
# Intro -------------------------------------------------------------------
rm(list = ls())
graphics.off()
pc <- "C:/Users/wrz741/Dropbox/C5_R_Codes/Rdata"
setwd(pc)
rm(pc)
library(plyr)
library(xlsx)
load("X-1 Choleraphone distribution 31Jul15.Rdata")
load("X-2 monthly visits 31Jul15.Rdata")
View(x1)
View(x2)
View(x1)
# Author: Matthew Phelps
#Desc: Calculate number of people living in each household at baseline
# Intro -------------------------------------------------------------------
rm(list = ls())
graphics.off()
pc <- "C:/Users/wrz741/Dropbox/C5_R_Codes/Rdata"
setwd(pc)
rm(pc)
library(plyr)
library(xlsx)
load("X-1 Choleraphone distribution 31Jul15.Rdata")
load("X-2 monthly visits 31Jul15.Rdata")
# Author: Matthew Phelps
#Desc: Calculate number of people living in each household at baseline
# Intro -------------------------------------------------------------------
rm(list = ls())
graphics.off()
pc <- "C:/Users/wrz741/Dropbox/C5 Field Operations data/Folder Amal"
setwd(pc)
rm(pc)
library(plyr)
library(xlsx)
x1 <- read.csv("X-1 Choleraphone distribution 31Jul15.csv", sep=";")
endDate <- Sys.Date()
# remove rows without a HHID
x1 <- x1[complete.cases(x1$HHID),]
# Format HHID and Listing number to have standard length. Then create unique ID
x1$HHID <-formatC(x1$HHID, width = 3, format = 'd', flag = 0)
x1$Listing.number <- formatC(x1$Listing.number, width = 4, format = 'd', flag = 0)
# create unique ID called "unique_HHID_list_no"
x1$unique_ID <- paste(x1$HHID, x1$Listing.number, sep="-")
# turn date characters into date format
x1_2 <- lapply(x1[,3:5], as.Date, format = "%d.%m.%y")
# Populate the withdrawl/move date as the current date for calculation purposes.
# Use a custom function
CurrentDate <- function(x) {
if (!is.na(x)) {
return(x)
} else {
x <- endDate
return(x)
}
}
for (i in 1:nrow(x1)) {
x1_2$Date.of.withdrawl.or.move[i] <- CurrentDate(x1_2$Date.of.withdrawl.or.move[i])
}
# Merge to create finished dataset
x1 <- cbind(x1[c(1:2, 6)], x1_2[1], x1_2[2], x1_2[3])
rm(x1_2)
View(x1)
endDate <- as.Date('31-12-14', "%d-%m-%y")
# Author: Matthew Phelps
#Desc: Calculate number of people living in each household at baseline
# Intro -------------------------------------------------------------------
rm(list = ls())
graphics.off()
pc <- "C:/Users/wrz741/Dropbox/C5 Field Operations data/Folder Amal"
setwd(pc)
rm(pc)
library(plyr)
library(xlsx)
x1 <- read.csv("X-1 Choleraphone distribution 31Jul15.csv", sep=";")
endDate <- as.Date('31-12-14', "%d-%m-%y")
# remove rows without a HHID
x1 <- x1[complete.cases(x1$HHID),]
# Format HHID and Listing number to have standard length. Then create unique ID
x1$HHID <-formatC(x1$HHID, width = 3, format = 'd', flag = 0)
x1$Listing.number <- formatC(x1$Listing.number, width = 4, format = 'd', flag = 0)
# create unique ID called "unique_HHID_list_no"
x1$unique_ID <- paste(x1$HHID, x1$Listing.number, sep="-")
# turn date characters into date format
x1_2 <- lapply(x1[,3:5], as.Date, format = "%d.%m.%y")
# Populate the withdrawl/move date as the current date for calculation purposes.
# Use a custom function
CurrentDate <- function(x) {
if (!is.na(x)) {
return(x)
} else {
x <- endDate
return(x)
}
}
for (i in 1:nrow(x1)) {
x1_2$Date.of.withdrawl.or.move[i] <- CurrentDate(x1_2$Date.of.withdrawl.or.move[i])
}
View(x1)
# Merge to create finished dataset
x1 <- cbind(x1[c(1:2, 6)], x1_2[1], x1_2[2], x1_2[3])
rm(x1_2)
# Author: Matthew Phelps
#Desc: Calculate number of people living in each household at baseline
# Intro -------------------------------------------------------------------
rm(list = ls())
graphics.off()
pc <- "C:/Users/wrz741/Dropbox/C5 Field Operations data/Folder Amal"
setwd(pc)
rm(pc)
library(plyr)
library(xlsx)
x1 <- read.csv("X-1 Choleraphone distribution 31Jul15.csv", sep=";")
# remove rows without a HHID
x1 <- x1[complete.cases(x1$HHID),]
# Format HHID and Listing number to have standard length. Then create unique ID
x1$HHID <-formatC(x1$HHID, width = 3, format = 'd', flag = 0)
x1$Listing.number <- formatC(x1$Listing.number, width = 4, format = 'd', flag = 0)
# create unique ID called "unique_HHID_list_no"
x1$unique_ID <- paste(x1$HHID, x1$Listing.number, sep="-")
# turn date characters into date format
x1_2 <- lapply(x1[,3:5], as.Date, format = "%d.%m.%y")
# Populate the withdrawl/move date as the current date for calculation purposes.
# Author: Matthew Phelps
#Desc: Calculate number of people living in each household at baseline
# Intro -------------------------------------------------------------------
rm(list = ls())
graphics.off()
pc <- "C:/Users/wrz741/Dropbox/C5 Field Operations data/Folder Amal"
setwd(pc)
rm(pc)
library(plyr)
library(xlsx)
x1 <- read.csv("X-1 Choleraphone distribution 31Jul15.csv", sep=";")
# remove rows without a HHID
x1 <- x1[complete.cases(x1$HHID),]
# Format HHID and Listing number to have standard length. Then create unique ID
x1$HHID <-formatC(x1$HHID, width = 3, format = 'd', flag = 0)
x1$Listing.number <- formatC(x1$Listing.number, width = 4, format = 'd', flag = 0)
# create unique ID called "unique_HHID_list_no"
x1$unique_ID <- paste(x1$HHID, x1$Listing.number, sep="-")
# turn date characters into date format
x1_2 <- lapply(x1[,3:5], as.Date, format = "%d.%m.%y")
# Populate the withdrawl/move date as the current date for calculation purposes.
# Use a custom function
CurrentDate <- function(x) {
if (!is.na(x)) {
return(x)
} else {
x <- endDate
return(x)
}
}
for (i in 1:nrow(x1)) {
x1_2$Date.of.withdrawl.or.move[i] <- CurrentDate(x1_2$Date.of.withdrawl.or.move[i])
}
# Merge to create finished dataset
x1 <- cbind(x1[c(1:2)], x1_2[1], x1_2[2], x1_2[3])
rm(x1_2)
# Author: Matthew Phelps
#Desc: Calculate number of people living in each household at baseline
# Intro -------------------------------------------------------------------
rm(list = ls())
graphics.off()
pc <- "C:/Users/wrz741/Dropbox/C5 Field Operations data/Folder Amal"
setwd(pc)
rm(pc)
library(plyr)
library(xlsx)
x1 <- read.csv("X-1 Choleraphone distribution 31Jul15.csv", sep=";")
# remove rows without a HHID
x1 <- x1[complete.cases(x1$HHID),]
# Format HHID and Listing number to have standard length. Then create unique ID
x1$HHID <-formatC(x1$HHID, width = 3, format = 'd', flag = 0)
x1$Listing.number <- formatC(x1$Listing.number, width = 4, format = 'd', flag = 0)
# create unique ID called "unique_HHID_list_no"
x1$unique_ID <- paste(x1$HHID, x1$Listing.number, sep="-")
# turn date characters into date format
x1_2 <- lapply(x1[,3:5], as.Date, format = "%d.%m.%y")
# Populate the withdrawl/move date as the current date for calculation purposes.
# Use a custom function
CurrentDate <- function(x) {
if (!is.na(x)) {
return(x)
} else {
x <- endDate
return(x)
}
}
for (i in 1:nrow(x1)) {
x1_2$Date.of.withdrawl.or.move[i] <- CurrentDate(x1_2$Date.of.withdrawl.or.move[i])
}
# Merge to create finished dataset
x1 <- cbind(x1[c(1:2, 6)], x1_2[1], x1_2[2], x1_2[3])
rm(x1_2)
# Author: Matthew Phelps
#Desc: Calculate number of people living in each household at baseline
# Intro -------------------------------------------------------------------
rm(list = ls())
graphics.off()
pc <- "C:/Users/wrz741/Dropbox/C5 Field Operations data/Folder Amal"
setwd(pc)
rm(pc)
library(plyr)
library(xlsx)
x1 <- read.csv("X-1 Choleraphone distribution 31Jul15.csv", sep=";")
# remove rows without a HHID
x1 <- x1[complete.cases(x1$HHID),]
# Format HHID and Listing number to have standard length. Then create unique ID
x1$HHID <-formatC(x1$HHID, width = 3, format = 'd', flag = 0)
x1$Listing.number <- formatC(x1$Listing.number, width = 4, format = 'd', flag = 0)
# create unique ID called "unique_HHID_list_no"
x1$unique_ID <- paste(x1$HHID, x1$Listing.number, sep="-")
# turn date characters into date format
x1_2 <- lapply(x1[,3:5], as.Date, format = "%d.%m.%y")
# Merge to create finished dataset
x1 <- cbind(x1[c(1:2, 6)], x1_2[1], x1_2[2], x1_2[3])
rm(x1_2)
View(x1)
save(x1, file = "C:/Users/wrz741/Dropbox/C5_R_Codes/Rdata/X-1 Choleraphone distribution 31Jul15.Rdata")
# Author: Matthew Phelps
#Desc: Calculate number of people living in each household at baseline
# Intro -------------------------------------------------------------------
rm(list = ls())
graphics.off()
pc <- "C:/Users/wrz741/Dropbox/C5_R_Codes/Rdata"
setwd(pc)
rm(pc)
library(plyr)
library(xlsx)
CurrentDate <- function(x) {
if (!is.na(x)) {
return(x)
} else {
x <- endDate
return(x)
}
}
load("X-1 Choleraphone distribution 31Jul15.Rdata")
load("X-2 monthly visits 31Jul15.Rdata")
endDate <- as.Date('31-12-14', "%d-%m-%y")
# Populate the withdrawl/move date as the current date for calculation purposes.
# Use a custom function
for (i in 1:nrow(x1)) {
x1_2$Date.of.withdrawl.or.move[i] <- CurrentDate(x1_2$Date.of.withdrawl.or.move[i])
}
# Author: Matthew Phelps
#Desc: Calculate number of people living in each household at baseline
# Intro -------------------------------------------------------------------
rm(list = ls())
graphics.off()
pc <- "C:/Users/wrz741/Dropbox/C5_R_Codes/Rdata"
setwd(pc)
rm(pc)
library(plyr)
library(xlsx)
CurrentDate <- function(x) {
if (!is.na(x)) {
return(x)
} else {
x <- endDate
return(x)
}
}
load("X-1 Choleraphone distribution 31Jul15.Rdata")
load("X-2 monthly visits 31Jul15.Rdata")
endDate <- as.Date('31-12-14', "%d-%m-%y")
# Populate the withdrawl/move date as the current date for calculation purposes.
# Use a custom function
for (i in 1:nrow(x1)) {
x1$Date.of.withdrawl.or.move[i] <- CurrentDate(x1$Date.of.withdrawl.or.move[i])
}
View(x1)
for (i in 1:nrow(x1)) {
if (x1$Date.of.phone.distribution[i] > endDate) {
x1[i,] <- NULL
} else {
x1$Date.of.withdrawl.or.move[i] <- CurrentDate(x1$Date.of.withdrawl.or.move[i])
}
}
x1[1,]
x1[1,] <- NULL
x1[-1,]
# Author: Matthew Phelps
#Desc: Calculate number of people living in each household at baseline
# Intro -------------------------------------------------------------------
rm(list = ls())
graphics.off()
pc <- "C:/Users/wrz741/Dropbox/C5_R_Codes/Rdata"
setwd(pc)
rm(pc)
library(plyr)
library(xlsx)
CurrentDate <- function(x) {
if (!is.na(x)) {
return(x)
} else {
x <- endDate
return(x)
}
}
load("X-1 Choleraphone distribution 31Jul15.Rdata")
load("X-2 monthly visits 31Jul15.Rdata")
endDate <- as.Date('31-12-14', "%d-%m-%y")
# RESTRICT TO DESIRED TIME-FRAME
for (i in 1:nrow(x1)) {
if (x1$Date.of.phone.distribution[i] > endDate) {
x1[-i,]
} else {
x1$Date.of.withdrawl.or.move[i] <- CurrentDate(x1$Date.of.withdrawl.or.move[i])
}
}
View(x1)
# Author: Matthew Phelps
#Desc: Calculate number of people living in each household at baseline
# Intro -------------------------------------------------------------------
rm(list = ls())
graphics.off()
pc <- "C:/Users/wrz741/Dropbox/C5_R_Codes/Rdata"
setwd(pc)
rm(pc)
library(plyr)
library(xlsx)
CurrentDate <- function(x) {
if (!is.na(x)) {
return(x)
} else {
x <- endDate
return(x)
}
}
load("X-1 Choleraphone distribution 31Jul15.Rdata")
load("X-2 monthly visits 31Jul15.Rdata")
endDate <- as.Date('31-12-14', "%d-%m-%y")
# RESTRICT TO DESIRED TIME-FRAME
for (i in 1:nrow(x1)) {
if (x1$Date.of.phone.distribution[i] > endDate) {
x1 <- x1[-i,]
} else {
x1$Date.of.withdrawl.or.move[i] <- CurrentDate(x1$Date.of.withdrawl.or.move[i])
}
}
View(x1)
